<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Hugo 0.20.7" />


<title>Phillips Hue in R  - Chris Ried Blog</title>
<meta property="og:title" content="Phillips Hue in R  - Chris Ried Blog">



  








<link href='//cdn.bootcss.com/highlight.js/9.11.0/styles/github.min.css' rel='stylesheet' type='text/css' />



<link rel="stylesheet" href="../../../../css/fonts.css" media="all">
<link rel="stylesheet" href="../../../../css/main.css" media="all">



  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <nav class="nav">
  <a href="../../../../" class="nav-logo">
    <img src="../../../../images/logo.png"
         width="50"
         height="50"
         alt="Logo">
  </a>

  <ul class="nav-links">
    
    <li><a href="../../../../about/">About</a></li>
    
    <li><a href="https://github.com/cdr6934">GitHub</a></li>
    
    <li><a href="https://500px.com/christopherried">Photography</a></li>
    
    <li><a href="../../../../resume/">Resume</a></li>
    
    <li><a href="https://twitter.com/cdr6934">Twitter</a></li>
    
  </ul>
</nav>

      </header>


<main class="content" role="main">

  <article class="article">
    
    <span class="article-duration">1 min read</span>
    

    <h1 class="article-title">Phillips Hue in R </h1>

    
    <span class="article-date">2017/06/03</span>
    

    <div class="article-content">
      <p>The following function can be used to find and display the internal IP address needed to retrieve the IP address from Hue Bridge. You will need to generate an API key i.e. a &ldquo;userkey&rdquo; as I called it below.</p>

<pre><code>getIP &lt;- function()
{
  url &lt;- paste0(&quot;https://www.meethue.com/api/nupnp&quot;)
  res &lt;- httpGET(url)
  resJson &lt;- fromJSON(res)
  res &lt;- resJson[[&quot;internalipaddress&quot;]]
  res
}

</code></pre>

<p>In order to know what light you should change the state on, one can run the following to retrieve the available lights connected on the network.</p>

<pre><code>getLights &lt;- function(ip, userName)
{
  ip &lt;- getIP()
  url &lt;- paste0(&quot;http://&quot;,ip,&quot;/api/&quot;,userName,&quot;/lights/&quot;)
  #content &lt;- paste0('{&quot;on&quot;:',state,'}')
  res &lt;- httpGET(url)
  res
}

getLights(getIP(),userName)
</code></pre>

<p>In order to change the state of a particular light; the following function can be called. Make sure to have a light designated for it to be manipulated.</p>

<pre><code>userName &lt;- &quot;&quot; 
light &lt;- &quot;1&quot; 

changeBrightness &lt;- function(ip, userName, light,brightness)
{
  ip &lt;- getIP()
  url &lt;- paste0(&quot;http://&quot;,ip,&quot;/api/&quot;,userName,&quot;/lights/&quot;,as.character(light),&quot;/state&quot;)
  content &lt;- paste0('{&quot;bri&quot;:',as.string(brightness),'}')
  res &lt;- httpPUT(url,content)
  res
}
</code></pre>

<p>Now to further play with that light, you can change the light brightness (1-254) on a sine wave or whatever function you might decide to use.</p>

<pre><code># change the brightness based on sin wave 
t = seq(0,60,0.3)
y &lt;- sin(t)
plot(y)
vals &lt;- as.integer(rescale(y,range(1,254)))
for(i in vals){changeBrightness(ip,userName,light,i)}


</code></pre>

    </div>
  </article>

  


</main>

      <footer class="footer">
        <ul class="footer-links">
          <li>
            <a href="../../../../index.xml" type="application/rss+xml" target="_blank">RSS feed</a>
          </li>
          <li>
            <a href="https://gohugo.io/" class="footer-links-kudos">Made with <img src="../../../../images/hugo-logo.png" width="22" height="22"></a>
          </li>
        </ul>
      </footer>

    </div>
    



<script src="//cdn.bootcss.com/highlight.js/9.11.0/highlight.min.js"></script>



<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/r.min.js"></script>
<script src="//cdn.bootcss.com/highlight.js/9.11.0/languages/yaml.min.js"></script>
<script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>



    

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-100452126-1', 'auto');
ga('send', 'pageview');
</script>

  </body>
</html>

